<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    function getComputerChoice() {
      return ["rock", "paper", "scissors"][Math.floor(Math.random() * 3)];
    }

    const winPaths = {
      rock: 'scissors',
      paper: 'rock',
      scissors: 'paper'
    };
    const isValid = (choice) => Reflect.has(winPaths, choice);

    const playRound = (playerChoice, computerChoice) =>
      isValid(playerChoice)
        ? isValid(computerChoice)
          ? playerChoice === computerChoice
            ? 0
            : winPaths[playerChoice] === computerChoice
              ? 1
              : -1
          : Number.NEGATIVE_INFINITY
        : Number.POSITIVE_INFINITY;

    function game() {
      let gameScore = 0;
      let i = 0;
      let playerWins = 0;
      let computerWins = 0;
      while (i < 5 && playerWins < 3 && computerWins < 3) {
        const playerSelection = prompt(`Round ${i + 1} - Choose Rock, Paper, or Scissors`);
        const computerSelection = getComputerChoice();
        const roundScore = playRound(playerSelection, computerSelection);
        let message = "Tie!";
        
        
        if (roundScore === Number.POSITIVE_INFINITY) message = `Player selection is invalid`
        else if (roundScore === Number.NEGATIVE_INFINITY) message = `Computer slection is invalid`
        else if (roundScore === 0) message = 'Tie!'
        else {
          gameScore += roundScore;
          if (roundScore > 0) {
            message = `You win! ${playerSelection} beats ${computerSelection}`;
            playerWins++;
          }
          else {
            message = `You lose! ${computerSelection} beats ${playerSelection}`;
            computerWins++;
          }
          i++;
        }
        console.log(message);
      }
      console.log(gameScore > 0 ? "Congratulations! You Won!" : "You Lost, better luck next time");
    }

    // function playRound(playerSelection, computerSelection) {
    //   playerSelection = playerSelection.toLowerCase();
    //   computerSelection = computerSelection.toLowerCase();
    //   switch (playerSelection) {
    //     case "rock":
    //       if (computerSelection === "rock") {
    //         return [0, "Tie!"];
    //       } else if (computerSelection === "paper") {
    //         return [-1, "You Lose! Paper beats Rock!"];
    //       } else if (computerSelection === "scissors") {
    //         return [1, "You Win! Rock beats Scissors!"];
    //       } else {
    //         return [Number.NaN, "computer selection was invalid"];
    //       }
    //       break;
    //     case "paper":
    //       if (computerSelection === "paper") {
    //         return [0, "Tie!"];
    //       } else if (computerSelection === "rock") {
    //         return [1, "You Win! Paper beats rock!"];
    //       } else if (computerSelection === "scissors") {
    //         return [-1, "You Lose! Scissors beats paper!"];
    //       } else {
    //         return [Number.NaN, "computer selection was invalid"];
    //       }
    //       break;
    //     case "scissors":
    //       if (computerSelection === "scissors") {
    //         return [0, "Tie!"];
    //       } else if (computerSelection === "paper") {
    //         return [1, "You Win! Scissors beats paper"];
    //       } else if (computerSelection === "rock") {
    //         return [-1, "You Lose! Rock beats Scissors!"];
    //       } else {
    //         return [Number.NaN, "computer selection was invalid"];
    //       }
    //       break;
    //     default:
    //       return [Number.NaN, "Player selection was invalid"];
    //   }
    // }

    // function game() {
    //   let gameScore = 0;
    //   let i = 0;
    //   let playerWins = 0;
    //   let computerWins = 0;
    //   while (i < 5 && playerWins < 3 && computerWins < 3) {
    //     const playerSelection = prompt(`Round ${i + 1} - Choose Rock, Paper, or Scissors`);
    //     const computerSelection = getComputerChoice();
    //     const [roundScore, message] = playRound(playerSelection, computerSelection);
    //     if (Number.isNaN(roundScore) || roundScore === 0) i--;
    //     else {
    //       gameScore += roundScore;
    //       if (roundScore > 0) playerWins++;
    //       else computerWins++;
    //     }
    //     console.log(message);
    //     i++;
    //   }
    //   console.log(gameScore > 0 ? "Congratulations! You Won!" : "You Lost, better luck next time");
    // }

    game();
  </script>
</body>

</html>